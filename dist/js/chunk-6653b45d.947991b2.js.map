{"version":3,"sources":["webpack:///./src/components/page/me/usernick.vue?66bb","webpack:///./src/components/page/me/usernick.vue?961e","webpack:///src/components/page/me/usernick.vue","webpack:///./src/components/page/me/usernick.vue?5e5e","webpack:///./src/components/page/me/usernick.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_usernick_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_usernick_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","title","slot","icon","on","click","$event","$router","go","left-icon","label","placeholder","error-message","usernick_err","focus","onUserFocus","model","value","callback","$$v","usernick","expression","staticStyle","width","type","onUserNick","_v","staticRenderFns","usernickvue_type_script_lang_js_","name","data","mounted","user","user_nick","computed","Object","objectSpread","vuex_esm","methods","_this","$http","get","host","params","then","res","result","uid","setUser","push","state","me_usernickvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"2IAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAgfE,EAAG,4CCAnf,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,MAAA,CAAOC,GAAA,aAAiB,CAAAH,EAAA,aAAkBI,YAAA,kBAAAF,MAAA,CAAqCG,MAAA,SAAgB,CAAAL,EAAA,aAAkBE,MAAA,CAAOI,KAAA,OAAAC,KAAA,QAA4BC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAd,EAAAe,QAAAC,IAAA,KAA2BN,KAAA,UAAa,GAAAN,EAAA,kBAA2BI,YAAA,kBAA6B,CAAAJ,EAAA,aAAkBE,MAAA,CAAOW,YAAA,UAAAC,MAAA,KAAAC,YAAA,SAAAC,gBAAApB,EAAAqB,cAA2FT,GAAA,CAAKU,MAAAtB,EAAAuB,aAAwBC,MAAA,CAAQC,MAAAzB,EAAA,SAAA0B,SAAA,SAAAC,GAA8C3B,EAAA4B,SAAAD,GAAiBE,WAAA,eAAwB,GAAAzB,EAAA,OAAgBI,YAAA,gBAA2B,CAAAJ,EAAA,aAAkBI,YAAA,WAAAsB,YAAA,CAAoCC,MAAA,OAAczB,MAAA,CAAQ0B,KAAA,UAAgBpB,GAAA,CAAKC,MAAAb,EAAAiC,aAAwB,CAAAjC,EAAAkC,GAAA,iBAChxBC,EAAA,2BCuBAC,EAAA,CACAC,KAAA,WACAC,KAFA,WAGA,OACAV,SAAA,GACAP,aAAA,KAGAkB,QARA,WAUAtC,KAAA2B,SAAA3B,KAAAuC,KAAAC,WAEAC,SAAAC,OAAAC,EAAA,KAAAD,CAAA,GACAA,OAAAE,EAAA,KAAAF,CAAA,kBAEAG,QAAAH,OAAAC,EAAA,KAAAD,CAAA,GACAA,OAAAE,EAAA,KAAAF,CAAA,aADA,CAGApB,YAAA,WACAtB,KAAAoB,aAAA,IAGAY,WAAA,eAAAc,EAAA9C,KACAA,KAAAuC,KAEAvC,KAAA2B,SAEA3B,KAAAuC,KAAAC,WAAAxC,KAAA2B,SACA3B,KAAAoB,aAAA,QAGApB,KAAA+C,MAAAC,IAAAhD,KAAAiD,KAAA,aAAAC,OAAA,CACAvB,SAAA3B,KAAA2B,YACAwB,KAAA,SAAAC,GACAN,EAAAO,OAAAD,EAAAf,MAEAS,EAAAC,MAAAC,IAAAF,EAAAG,KAAA,aAAAC,OAAA,CACAvB,SAAAmB,EAAAnB,SACA2B,IAAAR,EAAAP,KAAAjC,MACA6C,KAAA,SAAAC,GACAN,EAAAO,OAAAD,EAAAf,OACAS,EAAAP,KAAAC,UAAAM,EAAAnB,SACAmB,EAAAS,QAAAT,EAAAP,MACAO,EAAAhC,QAAA0C,KAAA,cACA,KAAAJ,EAAAf,KAAAoB,QACAX,EAAA1B,aAAA,WAGA,KAAAgC,EAAAf,KAAAoB,QACAX,EAAA1B,aAAA,WAvBApB,KAAAoB,aAAA,SAFApB,KAAAc,QAAA0C,KAAA,cChDgXE,EAAA,0BCQhXC,EAAgBjB,OAAAkB,EAAA,KAAAlB,CACdgB,EACA5D,EACAoC,GACF,EACA,KACA,KACA,MAIe2B,EAAA,WAAAF","file":"js/chunk-6653b45d.947991b2.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./usernick.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./usernick.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"usernick\"}},[_c('mt-header',{staticClass:\"usernick_header\",attrs:{\"title\":\"修改昵称\"}},[_c('mt-button',{attrs:{\"slot\":\"left\",\"icon\":\"back\"},on:{\"click\":function($event){return _vm.$router.go(-1)}},slot:\"left\"})],1),_c('van-cell-group',{staticClass:\"usernick_group\"},[_c('van-field',{attrs:{\"left-icon\":\"contact\",\"label\":\"昵称\",\"placeholder\":\"请输入新昵称\",\"error-message\":_vm.usernick_err},on:{\"focus\":_vm.onUserFocus},model:{value:(_vm.usernick),callback:function ($$v) {_vm.usernick=$$v},expression:\"usernick\"}})],1),_c('div',{staticClass:\"usernick_btn\"},[_c('mt-button',{staticClass:\"usernick\",staticStyle:{\"width\":\"80%\"},attrs:{\"type\":\"danger\"},on:{\"click\":_vm.onUserNick}},[_vm._v(\"保存\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 修改昵称 -->\r\n<template>\r\n    <div id=\"usernick\">\r\n        <mt-header class=\"usernick_header\" title=\"修改昵称\">\r\n\t\t\t<mt-button slot=\"left\" icon=\"back\" @click=\"$router.go(-1)\"></mt-button>\r\n\t\t</mt-header>\r\n        <van-cell-group class=\"usernick_group\">\r\n\t\t  <van-field\r\n\t\t\tv-model=\"usernick\"\r\n\t\t\tleft-icon=\"contact\"\r\n\t\t\tlabel=\"昵称\"\r\n\t\t\t@focus=\"onUserFocus\"\r\n\t\t\tplaceholder=\"请输入新昵称\"\r\n\t\t\t:error-message=\"usernick_err\"\r\n\t\t  />\r\n\t\t</van-cell-group>\r\n\t\t<div class=\"usernick_btn\">\r\n\t\t\t<mt-button class=\"usernick\" style=\"width:80%;\" type=\"danger\" @click=\"onUserNick\">保存</mt-button>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex'\r\nexport default {\r\n    name:\"usernick\",\r\n    data() {\r\n        return {\r\n            usernick:\"\",\r\n            usernick_err:\"\"\r\n        }\r\n    },\r\n    mounted(){\r\n        //在输入框内填原昵称\r\n        this.usernick = this.user.user_nick;\r\n    },\r\n    computed:{\r\n        ...mapState([\"host\",\"user\"])\r\n    },\r\n    methods: {\r\n        ...mapMutations([\"setUser\"]),\r\n        //当昵称输入框获取焦点\r\n        onUserFocus:function(){\r\n            this.usernick_err = \"\";\r\n        },\r\n        //修改昵称\r\n        onUserNick:function(){\r\n            if(!this.user){\r\n                this.$router.push(\"/login\");\r\n            }else if(!this.usernick){\r\n                this.usernick_err=\"昵称不能为空\";\r\n            }else if(this.user.user_nick == this.usernick){\r\n                this.usernick_err=\"昵称已存在\";\r\n            }else{\r\n                //验证新昵称是否已存在\r\n                this.$http.get(this.host+\"/usernick\",{\"params\":{\r\n                    \"usernick\":this.usernick        //新昵称\r\n                }}).then(res => {\r\n                    if(this.result(res.data)){//验证成功\r\n                        //修改昵称\r\n                        this.$http.get(this.host+\"/usernick\",{\"params\":{\r\n                            \"usernick\":this.usernick,   //新昵称\r\n                            \"uid\":this.user.id          //用户id\r\n                        }}).then(res => {\r\n                            if(this.result(res.data)){\r\n                                this.user.user_nick = this.usernick;\r\n                                this.setUser(this.user);//更新本地用户信息\r\n                                this.$router.push(\"/userinfo\");\r\n                            }else if(res.data.state == 154){\r\n                                this.usernick_err=\"昵称已存在\";\r\n                            };\r\n                        });\r\n                    }else if(res.data.state == 151){\r\n                        this.usernick_err=\"昵称已存在\";\r\n                    };\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.usernick_header{\r\n\tbackground:#D81E06;\r\n\tfont-size: 18px;\r\n}\r\n.usernick_header h1{\r\n\tline-height: 24px;\r\n\tfont-weight: 500;\r\n}\r\n.usernick_btn{\r\n\tmargin-top:20px;\r\n\ttext-align: center;\r\n}\r\n.usernick_group{\r\n\tmargin-top:10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./usernick.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./usernick.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./usernick.vue?vue&type=template&id=a9673190&\"\nimport script from \"./usernick.vue?vue&type=script&lang=js&\"\nexport * from \"./usernick.vue?vue&type=script&lang=js&\"\nimport style0 from \"./usernick.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}